<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Profile Card</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <main>
        <article class="profile-card">
            <nav class="navigation">
                <a href="index.html" class="nav-link">Profile</a>
                <a href="about.html" class="nav-link">About Me</a>
                <a href="contact.html" class="nav-link active">Contact Us</a>
            </nav>

            <header class="page-header">
                <h1>Contact Us</h1>
                <p>Get in touch with me! I'd love to hear from you.</p>
            </header>

            <section class="contact-form-section">
                <form id="contact-form" class="contact-form" novalidate>
                    <div class="form-group">
                        <label for="contact-name">Full Name *</label>
                        <input 
                            type="text" 
                            id="contact-name" 
                            name="name"
                            data-testid="test-contact-name"
                            required
                            aria-describedby="name-error"
                            autocomplete="name">
                        <div 
                            id="name-error" 
                            class="error-message" 
                            data-testid="test-contact-error-name"
                            role="alert"
                            aria-live="polite"></div>
                    </div>

                    <div class="form-group">
                        <label for="contact-email">Email Address *</label>
                        <input 
                            type="email" 
                            id="contact-email" 
                            name="email"
                            data-testid="test-contact-email"
                            required
                            aria-describedby="email-error"
                            autocomplete="email">
                        <div 
                            id="email-error" 
                            class="error-message" 
                            data-testid="test-contact-error-email"
                            role="alert"
                            aria-live="polite"></div>
                    </div>

                    <div class="form-group">
                        <label for="contact-subject">Subject *</label>
                        <input 
                            type="text" 
                            id="contact-subject" 
                            name="subject"
                            data-testid="test-contact-subject"
                            required
                            aria-describedby="subject-error">
                        <div 
                            id="subject-error" 
                            class="error-message" 
                            data-testid="test-contact-error-subject"
                            role="alert"
                            aria-live="polite"></div>
                    </div>

                    <div class="form-group">
                        <label for="contact-message">Message *</label>
                        <textarea 
                            id="contact-message" 
                            name="message"
                            data-testid="test-contact-message"
                            required
                            aria-describedby="message-error"
                            rows="5"
                            minlength="10"
                            placeholder="Please enter at least 10 characters..."></textarea>
                        <div 
                            id="message-error" 
                            class="error-message" 
                            data-testid="test-contact-error-message"
                            role="alert"
                            aria-live="polite"></div>
                    </div>

                    <button 
                        type="submit" 
                        data-testid="test-contact-submit"
                        class="submit-button">
                        Send Message
                    </button>

                    <div 
                        id="success-message" 
                        class="success-message" 
                        data-testid="test-contact-success"
                        role="alert"
                        aria-live="polite"></div>
                </form>
            </section>
        </article>
    </main>

    <script>
        // Form validation functionality
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('contact-form');
            const nameInput = document.querySelector('[data-testid="test-contact-name"]');
            const emailInput = document.querySelector('[data-testid="test-contact-email"]');
            const subjectInput = document.querySelector('[data-testid="test-contact-subject"]');
            const messageInput = document.querySelector('[data-testid="test-contact-message"]');
            const submitButton = document.querySelector('[data-testid="test-contact-submit"]');
            const successMessage = document.querySelector('[data-testid="test-contact-success"]');

            // Email validation regex
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            // Error message functions
            function showError(input, message) {
                const errorElement = document.querySelector(`[data-testid="test-contact-error-${input.name}"]`);
                errorElement.textContent = message;
                errorElement.style.display = 'block';
                input.classList.add('error');
                input.setAttribute('aria-invalid', 'true');
            }

            function clearError(input) {
                const errorElement = document.querySelector(`[data-testid="test-contact-error-${input.name}"]`);
                errorElement.textContent = '';
                errorElement.style.display = 'none';
                input.classList.remove('error');
                input.setAttribute('aria-invalid', 'false');
            }

            function clearAllErrors() {
                [nameInput, emailInput, subjectInput, messageInput].forEach(input => {
                    clearError(input);
                });
                successMessage.textContent = '';
                successMessage.style.display = 'none';
            }

            // Validation functions
            function validateName() {
                const value = nameInput.value.trim();
                if (!value) {
                    showError(nameInput, 'Full name is required.');
                    return false;
                }
                clearError(nameInput);
                return true;
            }

            function validateEmail() {
                const value = emailInput.value.trim();
                if (!value) {
                    showError(emailInput, 'Email address is required.');
                    return false;
                }
                if (!emailRegex.test(value)) {
                    showError(emailInput, 'Please enter a valid email address (e.g., name@example.com).');
                    return false;
                }
                clearError(emailInput);
                return true;
            }

            function validateSubject() {
                const value = subjectInput.value.trim();
                if (!value) {
                    showError(subjectInput, 'Subject is required.');
                    return false;
                }
                clearError(subjectInput);
                return true;
            }

            function validateMessage() {
                const value = messageInput.value.trim();
                if (!value) {
                    showError(messageInput, 'Message is required.');
                    return false;
                }
                if (value.length < 10) {
                    showError(messageInput, 'Message must be at least 10 characters long.');
                    return false;
                }
                clearError(messageInput);
                return true;
            }

            // Real-time validation
            nameInput.addEventListener('blur', validateName);
            emailInput.addEventListener('blur', validateEmail);
            subjectInput.addEventListener('blur', validateSubject);
            messageInput.addEventListener('blur', validateMessage);

            // Clear errors on input
            nameInput.addEventListener('input', () => {
                if (nameInput.classList.contains('error')) {
                    validateName();
                }
            });

            emailInput.addEventListener('input', () => {
                if (emailInput.classList.contains('error')) {
                    validateEmail();
                }
            });

            subjectInput.addEventListener('input', () => {
                if (subjectInput.classList.contains('error')) {
                    validateSubject();
                }
            });

            messageInput.addEventListener('input', () => {
                if (messageInput.classList.contains('error')) {
                    validateMessage();
                }
            });

            // Form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                clearAllErrors();

                // Validate all fields
                const isNameValid = validateName();
                const isEmailValid = validateEmail();
                const isSubjectValid = validateSubject();
                const isMessageValid = validateMessage();

                // If all validation passes
                if (isNameValid && isEmailValid && isSubjectValid && isMessageValid) {
                    // Show success message
                    successMessage.textContent = 'Thank you for your message! I\'ll get back to you soon.';
                    successMessage.style.display = 'block';
                    
                    // Reset form
                    form.reset();
                    
                    // Focus on success message for screen readers
                    successMessage.focus();
                    
                    // Scroll to success message
                    successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    // Focus on first error field
                    const firstErrorField = form.querySelector('.error');
                    if (firstErrorField) {
                        firstErrorField.focus();
                    }
                }
            });
        });
    </script>
</body>
</html>
